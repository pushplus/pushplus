# 一对多消息使用说明

## 引言
&emsp;&emsp;pushplus 推送加可以使用一对多消息支持将一个消息发送给多个用户，需要先让用户加入到创建好的群组中。然后在发送消息接口上对一个topic参数，发送的消息将会推送到群组中所有的用户。如发送邮件、短信渠道的消息，需要群组中的用户自己先绑定好邮件、手机号，未绑定的用户将无法接收到消息。

## 创建群组
　&emsp;&emsp;可以在pushplus官网上点击“发送消息”->“一对多消息”进入功能页面。在“创建的群组”标签下点击“新建群组”，填写群组的相关信息。注意尽可能的将群组中的内容描述清晰方便加入的用户查看。
具体新增群组字段说明：
- 群组类型：普通群组的话仅订阅群组的用户才能查看群组介绍。使用公开群组可以方便传播分享，未订阅的用户也能查看内容，从而方便加入。
- 群组编码：用于发送消息的编码，自己随便定义。
- 群组名称：方便自己和订阅用户来区分不同的群组，名称自己随便定义。
- 联系方式：方便订阅用户在有问题的时候可以找到联系人来反馈问题。请留下自己真实的联系方式。
- 群组图标：用户自己上传，用于展示。
- 群组介绍：类似于电商产品的详情页，请尽可能的完善内容，图文结合。方便用户知道群组推送的内容是什么。


## 发送消息的方式
### 一. 网页上发送消息
　&emsp;&emsp;可以在pushplus官网上点击“发送消息”->“一对多消息”进入功能页面。在“试一试”中填入群组编码、消息标题和消息内容，点击“发送消息”按钮来发起一条推送请求。注意，推送请求成功并不代表就会推送消息，又可能因为配置或账号等原因不会真的发送消息。需要根据返回的消息流水号来查询消息的最终发送结果。当然如果您在pushplus公众号中接收到一条刚刚推送的消息内容，也就代表成功了！

<a data-fancybox title="" href="//image.pushplus.plus/doc/img/msg.png"><img src="//image.pushplus.plus/doc/img/msg.png" alt=""></a>

### 二. 使用API调用
　&emsp;&emsp;网页上只是测试验证，确保功能上是可用的。实际使用中还是需要通过接口来推送消息。
更多的参考[消息接口文档](../guide/api.html)中的说明来发送接口。注意控制接口请求的频率和次数，避免给用户造成骚扰。具体的请求限制参考[发送消息接口有什么限制吗？](../help/limit.html)。

#### API调用示例
- 请求地址：https://www.pushplus.plus/send/
- 请求方式: POST
- 请求内容：

```
{
    "token":{token},
    "title":"标题",
    "content":"消息内容"
    "topic":{群组编码}
}
```
- 说明：具体使用的时候将请求内容中的{token}替换成自己的用户token或者消息token。{群组编码}替换成自定义的群组编码。

　&emsp;&emsp;如果您是第三方开发者，也请注意下代码逻辑。
1. 发送消息接口是异步的，请勿直接根据同步返回的“请求成功”来认为消息就是发送成功了！而是根据同步返回的流水号来异步的查询最终消息结果。
2. 根据返回码来判断是否继续发送消息，避免账号被封请异常情况的发生。具体可以参考：[接口返回码说明](../guide/code.html)
3. 请控制接口请求的次数和频率。发送消息接口并不是可以无限调用的。

### 三. 使用第三方开发的工具
　&emsp;&emsp;除了自己开发，网上还有一些软件工具或者脚本已经集成了pushplus的发送消息功能，只需要配置自己的用户token或者消息token，无需关心具体的接口等信息，即可快捷的使用。对于这些第三方开发的工具，需要注意请求的频率控制，第三方开发者不一定很好的实现了判断逻辑来防止异常情况下消息频繁发送的情况，从而会出现账号被封，无法接收消息等情况。

　&emsp;&emsp;如果您使用了第三方工具，在使用过程中碰到了问题请与第三方开发者联系。
